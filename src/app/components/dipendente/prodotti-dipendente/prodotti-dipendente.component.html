<app-toolbar [pages]="linkedPages" title="Dipendente"></app-toolbar>

<div *ngIf="prodotti.length > 0; else noProdotti" class="pageContainer">

    <div class="prodottiContainer">

        <mat-selection-list class="prodottiList" [multiple]="false">
            <h1>Prodotti disponibili</h1>
            <mat-list-option class="listItem" *ngFor="let prodotto of prodotti; let i = index" [selected]="prodottoSelezionato == prodotto" (click)="selezionaProdotto(prodotto)">
                <div mat-line>{{prodotto.nome}}</div>
                <div mat-line>
                    <label class="labelColor" for="prezzo">Prezzo: </label>
                    <span id="prezzo">{{prodotto.prezzo}}$</span>
                </div>
            </mat-list-option>
            <mat-list-option (click)="openSaveProdottoDialog(true)">
                <div mat-line>
                    <i class="material-icons">add</i>
                </div>
                <div mat-line></div>
            </mat-list-option>
        </mat-selection-list>

        <mat-card *ngIf="prodottoSelezionato != null" class="prodottoInfo">
            <mat-card-header>
                <button (click)="openSaveProdottoDialog(false)" mat-card-avatar mat-icon-button color="primary" aria-label="Modifica prodotto"><i class="material-icons">edit</i></button>
                <mat-card-title>{{prodottoSelezionato.nome}}</mat-card-title>
            </mat-card-header>
            <mat-card-content>
                <p>{{prodottoSelezionato.descrizione}}</p>
                <form [formGroup]="inventarioForm">
                    <mat-form-field class="statoInput">
                        <mat-label>Disponibili</mat-label>
                        <input type="number" formControlName="disponibile" matInput>
                    </mat-form-field>
                    <br>
                    <mat-form-field class="statoInput">
                        <mat-label>Non disponibili</mat-label>
                        <input type="number" formControlName="non_disponibile" matInput>
                    </mat-form-field>
                    <br>
                    <mat-form-field class="statoInput">
                        <mat-label>In promozione</mat-label>
                        <input type="number" formControlName="in_promozione" matInput>
                    </mat-form-field>
                    <br>
                    <mat-form-field class="statoInput">
                        <mat-label>Venduti</mat-label>
                        <input type="number" formControlName="venduto" matInput>
                    </mat-form-field>
                    <br>
                </form>
            </mat-card-content>
            <mat-card-actions>
                <div class="matCardSpacer"></div>
                <button (click)="salvaInventarioProdotto()" [disabled]="inventarioForm.invalid || !isFormDirty()" mat-stroked-button>SALVA</button>
            </mat-card-actions>
          </mat-card>

    </div>

</div>

<ng-template #noProdotti>
    <div class="pageContainer">
        <p>Non ci sono prodotti registrati</p>
    </div>
</ng-template>
