<app-toolbar [pages]="linkedPages" title="Amministrazione"></app-toolbar>

<div class="pageContainer">

    <div class="listaDipendentiContainer">
        <h1 class="pageTitle">Lista dipendenti</h1>
        <mat-list>
            <mat-selection-list #shoes [multiple]="false">
                <mat-list-option *ngFor="let dipendente of dipendenti" (click)="openDipendenteDettaglio(dipendente)" [ngClass]="dipendente == dettaglioDipendente ? 'dipendenteItemSelezionato' : ''" class="dipendenteItem">
                    <div mat-line>{{dipendente.nome}} {{dipendente.cognome}}</div>
                <div mat-line>{{dipendente.email}}</div>
                </mat-list-option>
            </mat-selection-list>
        </mat-list>
    </div>

    <div *ngIf="dettaglioDipendente" class="dettaglioDipendenteContainer">
        <h3>{{dettaglioDipendente.nome}} {{dettaglioDipendente.cognome}}</h3>
        <label class="dettaglioLabel" for="email">Email:</label>
        <p id="email">{{dettaglioDipendente.email}}</p>
        <mat-divider></mat-divider>
        <label class="dettaglioLabel" for="email">Password:</label>
        <p id="email">{{dettaglioDipendente.password}}</p>
        <mat-divider></mat-divider>
        <label class="dettaglioLabel" for="email">Numero di telefono:</label>
        <p id="email">{{dettaglioDipendente.numTelefono}}</p>
        <mat-divider></mat-divider>
        <label class="dettaglioLabel" for="email">Data di nascita:</label>
        <p id="email">{{dettaglioDipendente.dataNascita}}</p>
        <mat-divider></mat-divider>
        <label class="dettaglioLabel" for="email">Stipendio:</label>
        <p id="email">{{dettaglioDipendente.stipendio}}</p>
    </div>

    <div class="nuovoDipendenteContainer">
        <mat-card>
            <mat-card-header>
                <mat-card-title>Nuovo dipendente</mat-card-title>
            </mat-card-header>
            <mat-card-content>
        
              <form [formGroup]="newDipendenteForm">
                <mat-form-field appearance="fill">
                    <mat-label>Nome</mat-label>
                    <input matInput formControlName="nome">
                </mat-form-field>
                
                <mat-form-field appearance="fill">
                    <mat-label>Cognome</mat-label>
                    <input matInput formControlName="cognome">
                </mat-form-field>
                <br>
                <mat-form-field appearance="fill">
                    <mat-label>Email</mat-label>
                    <input matInput formControlName="email" required>
                    <mat-error *ngIf="newDipendenteForm.controls['email'].hasError('required')">Campo obbligatorio</mat-error>
                    <mat-error *ngIf="newDipendenteForm.controls['email'].hasError('email')">Email non valida</mat-error>
                </mat-form-field>
                
                <mat-form-field appearance="fill">
                    <mat-label>Password</mat-label>
                    <input matInput formControlName="password" required>
                    <mat-error *ngIf="newDipendenteForm.controls['password'].hasError('required')">Campo obbligatorio</mat-error>
                    <mat-error *ngIf="newDipendenteForm.controls['password'].hasError('minLength')">La password deve essere lunga almeno 8 caratteri</mat-error>
                </mat-form-field>
                <br>
                <mat-form-field appearance="fill">
                    <mat-label>Numero di telefono</mat-label>
                    <input matInput formControlName="numTelefono">
                </mat-form-field>
                
                <mat-form-field appearance="fill">
                    <mat-label>Data di nascita</mat-label>
                    <input matInput [matDatepicker]="datePicker" formControlName="dataNascita">
                    <mat-datepicker-toggle matSuffix [for]="datePicker"></mat-datepicker-toggle>
                    <mat-datepicker #datePicker></mat-datepicker>
                </mat-form-field>
                <br>
                <mat-form-field appearance="fill">
                    <mat-label>Stipendio</mat-label>
                    <input matInput type="number" formControlName="stipendio">
                    <mat-error *ngIf="newDipendenteForm.controls['stipendio'].hasError('required')">Campo obbligatorio</mat-error>
                    <mat-error *ngIf="newDipendenteForm.controls['stipendio'].hasError('min')">Lo stipendio non pu√≤ essere negativo</mat-error>
                </mat-form-field>
                <br>
                <div class="submitContainer">
                    <button [disabled]="newDipendenteForm.invalid" mat-raised-button color="primary" (click)="signin()">Registrati</button>
                </div>
                
              </form>
      
              <p class="errorMessage">{{errorMessage}}</p>
        
            </mat-card-content>
          </mat-card>
    </div>

</div>